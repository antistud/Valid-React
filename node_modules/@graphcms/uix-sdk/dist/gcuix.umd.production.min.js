!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@graphcms/zoid/lib/zoid.js")):"function"==typeof define&&define.amd?define(["exports","@graphcms/zoid/lib/zoid.js"],o):o((e=e||self).GCUIX={},e.zoid)}(this,(function(e,o){"use strict";function n(e,o){if(null==e)return{};var n,i,r={},t=Object.keys(e);for(i=0;i<t.length;i++)o.indexOf(n=t[i])>=0||(r[n]=e[n]);return r}o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;var i=["timeout","window","close","focus","resize","uid","cspNonce","getParent","getParentDomain","hide","show","export","onDisplay","onRendered","onRender","onClose","onDestroy","onResize","onFocus","onError","onProps"],r=["onProps","onConnected","resize"],t=["onProps","onConnected"];function s(e){var o={};return Object.keys(e).forEach((function(n){i.includes(n)||(n.startsWith("_")&&i.includes(n.replace(/^_/g,""))?o[n.replace(/^_/g,"")]=e[n]:o[n]=e[n])})),o}function d(e){var i=e.debug,d=e.declaration,a=e.onProps,p=void 0===a?function(){}:a,u=e.uid;return new Promise((function(e,a){if("undefined"==typeof window||void 0===window.postMessage)return a({error:"unsupported_env",message:"Unsupported environment: Not in a browser supporting PostMessage"});var c=u||"undefined"!=typeof URLSearchParams&&new URLSearchParams(window.location.search).get("extensionUid");if(!c)return i&&console.error("[UIX] no uid found in init params or extension URL"),a({error:"missing_uid",message:"Missing UID: no UID found in init params or extension URL"});if(i&&console.info("[UIX:"+c+"] initializing with uid "+c),o.create({tag:c,url:window.location.href.toString(),autoResize:{width:!1,height:!0,element:"html"},props:{onConnected:{type:"function"}}}),void 0!==window.xprops){var l=window.xprops.onConnected;i&&console.info("[UIX:"+c+"] transmitting declaration",d),l(c,d).then((function(o){if(!0===o){var d=window.xprops,a=d.onProps,u=d.resize,l=n(d,r);i&&console.info("[UIX:"+c+"] initial shared props",l),a((function(e){var o=n(e,t);i&&console.info("[UIX:"+c+"] new shared props",o),"isExpanded"in e&&"boolean"==typeof e.isExpanded&&u(e.isExpanded?{height:"full",width:"100%"}:{height:"auto",width:"100%"}),p(s(o))})),i&&console.info("[UIX:"+c+"] initialized"),p(s(l)),e({status:"ok",props:s(l)})}else i&&console.info("[UIX:"+c+"] sdk renderer returned status:",o),e({status:"validation"})}))}else i&&console.error("[UIX] no shared props from host found"),a({error:"failed_communication",message:"No communication established with host, please check your URL"})}))}var a={init:d};e.ConfigType={string:"string",number:"number",boolean:"boolean"},e.ExtensionPermission={INPUT:"INPUT",FORM:"FORM",API:"API"},e.ExtensionType={formSidebar:"formSidebar",field:"field"},e.FieldExtensionFeature={FieldRenderer:"FieldRenderer",ListRenderer:"ListRenderer",TableRenderer:"TableRenderer"},e.FieldExtensionType={STRING:"STRING",RICHTEXT:"RICHTEXT",INT:"INT",FLOAT:"FLOAT",BOOLEAN:"BOOLEAN",JSON:"JSON",DATETIME:"DATETIME",DATE:"DATE",LOCATION:"LOCATION",COLOR:"COLOR",ENUMERATION:"ENUMERATION",RELATION:"RELATION",ASSET:"ASSET",UNION:"UNION"},e.ToastPosition={"top-right":"top-right","top-center":"top-center","top-left":"top-left","bottom-right":"bottom-right","bottom-center":"bottom-center","bottom-left":"bottom-left"},e.ToastVariantColor={success:"success",error:"error",warning:"warning",info:"info",primary:"primary",dark:"dark",publish:"publish"},e.UserKind={MEMBER:"MEMBER",PAT:"PAT",PUBLIC:"PUBLIC",WEBHOOK:"WEBHOOK"},e.default=a,e.init=d,e.reservedExtensionProps=i,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=gcuix.umd.production.min.js.map
